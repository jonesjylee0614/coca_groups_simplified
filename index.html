<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COCA 5000 高频词学习系统</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>COCA 5000 高频词学习系统</h1>
            <p class="subtitle">American English Corpus - 5000 Most Common Words</p>
            <div class="theme-switcher">
                <button class="theme-btn" data-theme="light" onclick="setTheme('light')" title="明亮模式">☀️ 明亮</button>
                <button class="theme-btn" data-theme="dark" onclick="setTheme('dark')" title="暗黑模式">🌙 暗黑</button>
                <button class="theme-btn" data-theme="paper" onclick="setTheme('paper')" title="纸质书模式">📖 纸质书</button>
            </div>
            
            <!-- Book Selection -->
            <div class="book-selector">
                <button class="book-btn active" onclick="switchBook('book1')" id="book1Btn">
                    📚 Book 1 (原版)
                </button>
                <button class="book-btn" onclick="switchBook('book2')" id="book2Btn">
                    📖 Book 2 (重排版)
                </button>
            </div>
        </header>

        <section class="stats-section">
            <div class="stat-card">
                <div class="stat-number" id="totalGroups">100</div>
                <div class="stat-label">总组数</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedGroups">0</div>
                <div class="stat-label">已完成</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalWords">5000</div>
                <div class="stat-label">总词汇量</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="progressPercent">0%</div>
                <div class="stat-label">完成度</div>
            </div>
        </section>

        <section class="search-section">
            <div class="search-box">
                <input type="number"
                       id="groupSearch"
                       placeholder="输入组号 (1-200) 直接跳转"
                       min="1"
                       max="200">
                <button onclick="jumpToGroup()">GO</button>
                <button onclick="openSearchModal()" class="search-btn-main">🔍 全局搜索</button>
                <button onclick="openVocabularyBook()" class="vocab-btn">📚 生词本</button>
                <button onclick="openReviewModal()" class="review-btn-main">📅 复习计划</button>
            </div>
            <p class="search-hint" id="searchHint">当前选择：Book 1 (1-100组)</p>
        </section>

        <!-- Statistics & Charts Section (P2-2) -->
        <section class="statistics-section" id="statisticsSection">
            <div class="section-header">
                <h2>📊 学习统计</h2>
                <button class="toggle-stats-btn" onclick="toggleStatistics()" id="toggleStatsBtn">
                    <span id="statsToggleIcon">▼</span> 展开
                </button>
            </div>
            <div class="stats-content" id="statsContent" style="display: none;">
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>学习进度</h3>
                        <canvas id="progressChart"></canvas>
                        <div class="chart-legend" id="progressLegend"></div>
                    </div>
                    <div class="chart-card">
                        <h3>每日词汇量 (最近7天)</h3>
                        <canvas id="dailyVocabChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>学习时长统计</h3>
                        <canvas id="studyTimeChart"></canvas>
                        <div class="time-summary" id="timeSummary"></div>
                    </div>
                    <div class="chart-card heatmap-card">
                        <h3>学习热力图 (最近30天)</h3>
                        <div id="heatmapContainer" class="heatmap-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="groups-section">
            <h2>学习分组</h2>
            <div class="groups-container" id="groupsContainer">
                <!-- Groups will be dynamically generated here -->
            </div>
        </section>

        <footer class="footer">
            <p>基于 COCA (Corpus of Contemporary American English) 语料库</p>
            <p id="footerText">每组50个高频词 | 共100组 | 5000个核心词汇</p>
        </footer>
    </div>

    <script src="app.js"></script>
    <script>
        // Initialize homepage
        initHomepage();
    </script>
</body>
</html>
